(function($){$.phavison=function(call,options){if(options===undefined){options={};}
var time_start=new Date().getMilliseconds();var return_data;var settings=$.extend({url:'bin/phavison.php',variables:false,async_enabled:true,async_function:'phavisonCallback',debug_error:false,debug_notify:false,ajax_settings:false,get_enabled:false},options);if(call!==null){var method_type="POST";if(settings.get_enabled!==false){method_type="GET";}
var data_send_array=null;if(settings.variables!==false){data_send_array=btoa(JSON.stringify(settings.variables));}
var data_send={call_to:call,parameters:data_send_array};var ajax_settings_array={};if(settings.ajax_settings!==false){ajax_settings_array=settings.ajax_settings;}
var ajax_settings=$.extend({url:settings.url,method:method_type,async:settings.async_enabled,data:data_send},ajax_settings_array);$.ajax(ajax_settings).done(function(data){return_data=data;if(settings.debug_notify){alert(JSON.stringify(return_data).split("\\").join(""));}
var json_object=jQuery.parseJSON(return_data);if(settings.debug_error&&json_object.err_code!==0){var time_end=new Date().getMilliseconds();var time_total=time_end-time_start;if(time_total<0){time_total=time_total+1;}
alert("PHAVISON-ERROR-"+json_object.err_code+": "+json_object.err_msg+"\nINFO:\nFunction Called: "+json_object.function_called+"\nParameters Defined: "+json_object.variables+"\nPHP Execution Time: "+json_object.exec_time+" Milliseconds\nTotal Execution Time: "+time_total+" Milliseconds");}
if(settings.async_enabled===true){window[settings.async_function](json_object);}}).fail(function(){return_data={error:"The Phavison AJAX call has failed please verify your phavison settings and make the call again."};if(settings.debug_error){alert("The Phavison AJAX call has failed please verify your phavison settings and make the call again.");}});}else{return_data={error:"No PHP function was given. Please try again!"};}
return return_data;};}(jQuery));